{{extend 'layout.html'}}

<!--

-->
<body class="hack_body">

{{if 'db_contents' in globals():}}
<h2>{{=db_contents}}</h2>
{{else:}}
{{pass}}

{{if 'changed_ecu_list' in globals():}}
<h2>{{=changed_ecu_list}}</h2>
{{else:}}
{{pass}}

{{if 'edited_vehicle' in globals():}}
    <script>
        console.log(" hello2! " + {{=edited_vehicle}});
        jQuery('tr[id={{=edited_vehicle}}]').each(function(){
            var button = $("<td><a id='update_button' href='/UPTANE/default/index'>Push Change</a></td>");
            button.click(function(){
                alert($("#update_button").attr("href"));
                jQuery('input[value={{=edited_vehicle}}]').attr('checked', 'checked');
            });
            button.appendTo(jQuery(this));
        });
    </script>
{{else:}}
{{pass}}

{{if 'available_updates' in globals():}}
    <script>
        console.log(" hello3! " + {{=available_updates}});
        for (i = 0; i < {{=available_updates}}.length; i++){
            console.log( "yepp: " + i);
            console.log({{=available_updates}}[i]);
            var id_num = {{=available_updates}}[i];
            jQuery('tr[id=' + id_num + ']').each(function(){
                var button = $("<td><a id='available_update_button' href='/UPTANE/default/index'>AVAILABLE UPDATE</a></td>");
                button.click(function(){
                    alert($("#available_update_button").attr("href"));
                    jQuery('input[value=id_num]').attr('checked', 'checked');
                });
                button.appendTo(jQuery(this));
            });
        }
    </script>
{{else:}}
{{pass}}

<table class="hack_table" align="center">
<h1 align="center"><tr><td>{{=A('Man-in-the-Middle', callback=URL('hack1'))}}</td><td>{{=A('Director Rollback', callback=URL('hack2'))}}</td>
                    <td>{{=A('Supplier Compromised', callback=URL('hack3'))}}</td><td>{{=A('Director Compromised', callback=URL('hack4'))}}</td>
                    <td>{{=A('Arbitrary Package', callback=URL('hack5'))}}</td><td>{{=A('General Attack', callback=URL('hack6'))}}</td></tr></h1>

<h1 align="center" class="hack_links"><tr><td>{{=A('MITM Restore', callback=URL('hack7'))}}</td><td>{{=A('Director Rollback Restore', callback=URL('hack8'))}}</td>
                    <td>{{=A('Supplier Restore', callback=URL('hack9'))}}</td><td>{{=A('Director Restore', callback=URL('hack10'))}}</td>
                    <td>{{=A('Update Supplier Key', callback=URL('hack11'))}}</td><td>{{=A('Update Director Key', callback=URL('hack12'))}}</td></tr></h1>
</table>
<!--<h1 align="center"><button id="hack1" class="hack_btn" onclick="/hacked1';">HACK 1</button><button id="hack2" class="hack_btn">HACK 2</button>
                    <button id="hack3" class="hack_btn">HACK 3</button><button id="hack4" class="hack_btn">HACK 4</button>
                    <button id="hack5" class="hack_btn">HACK 5</button><button id="hack6" class="hack_btn">HACK 6</button>
</h1>-->

<h1 align="center"><input type="button" class="safety_btn" onclick="location.href='/UPTANE/default/index';"></button></h1>


</body>